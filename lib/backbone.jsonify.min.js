/*! backbone.jsonify - v0.1.0 - 2015-07-27
* Copyright (c) 2015 Nacho Codo√±er; Licensed MIT */
(function(e,t){"use strict";if("function"==typeof define&&define.amd)define(["underscore","backbone"],t);else if("object"==typeof module&&module.exports){var n=require("underscore"),o=require("backbone");module.exports=t(n,o)}else e.returnExports=t(e._,e.Backbone)})(this,function(e,t){"use strict";var n=t.Model.prototype.toJSON,o=function(n){return e.each(n,function(i,r){i instanceof t.Model||i instanceof t.Collection?n[r]=i.toJSON():e.isObject(i)&&(n[r]=o(e.clone(i)))}),n};return t.Model.prototype.toJSON=function(){var t,i=arguments[0];return i&&i.includeInJson?t=e.pick(this.attributes,i.includeInJson):i&&i.excludeInJson?t=e.omit(this.attributes,i.excludeInJson):i&&i.filterInJson?(t={},e.each(this.attributes,function(e,n){i.filterInJson(e,n)&&(t[n]=e)})):t=n.call(this,i),t=o(t)},t});